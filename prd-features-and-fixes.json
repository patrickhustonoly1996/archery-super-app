{
  "name": "Features and Fixes (Non-Testing)",
  "description": "Bug fixes, UI improvements, and new features from PRD_RALPH_SESSION.md - excludes testing work",
  "branchName": "ralph/features-and-fixes",
  "userStories": [
    {
      "id": "US-001",
      "title": "1A: Splash Screen Logo",
      "description": "As a user, I want to see the app icon and 'built by HUSTON ARCHERY' on the splash screen",
      "acceptanceCriteria": [
        "Display the app launcher icon on splash screen",
        "Below icon: text 'built by HUSTON ARCHERY'",
        "Use AppFonts.pixel (VT323) for the text",
        "Gold (#FFD700) text on dark background",
        "Update Android launch_background.xml",
        "Update iOS LaunchImage.imageset",
        "Update web index.html splash section",
        "flutter test passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": "Files: lib/main.dart, android/app/src/main/res/drawable/launch_background.xml, ios/Runner/Assets.xcassets/LaunchImage.imageset/, web/index.html",
      "dependsOn": []
    },
    {
      "id": "US-002",
      "title": "1B: Default 2x Zoom for Plotting",
      "description": "As a user, I want the target to open at 2x zoom when plotting",
      "acceptanceCriteria": [
        "Target face loads at 2x zoom when plotting screen opens",
        "Change _currentZoom initial value from 1.0 to 2.0",
        "Smart auto-zoom still works and adjusts based on group spread",
        "Auto-zoom never goes below 2x (floor at minZoom = 2.0)",
        "Pinch-to-zoom remains functional",
        "flutter test passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": "Files: lib/widgets/target_face.dart, lib/utils/smart_zoom.dart",
      "dependsOn": []
    },
    {
      "id": "US-003",
      "title": "2A: Volume Manual Entry Not Saving",
      "description": "As a user, I want my manually entered arrow volume data to persist",
      "acceptanceCriteria": [
        "Investigate lib/screens/volume_import_screen.dart save logic",
        "Add explicit success check after database write",
        "Add error state if save fails (don't pretend it worked)",
        "Test: Enter data, close screen, reopen - data should persist",
        "flutter test passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": "Issue 4 from PRD: Volume import may fail silently.",
      "dependsOn": []
    },
    {
      "id": "US-004",
      "title": "2B: Vibrations Not Triggering",
      "description": "As a user, I want haptic feedback during breath training phase transitions",
      "acceptanceCriteria": [
        "Change getBeepsEnabled() default from false to true in breath_training_service.dart line ~99",
        "Add HapticFeedback.mediumImpact() calls at phase transitions",
        "Add vibrations toggle in breath training settings (label as 'Vibrations')",
        "Store vibration preference in SharedPreferences",
        "Vibrations ON by default",
        "flutter test passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": "Files: lib/services/breath_training_service.dart, lib/screens/breath_training/*.dart",
      "dependsOn": []
    },
    {
      "id": "US-005",
      "title": "Timer Pause on App Background (Paced Breath Screens)",
      "description": "As a user, I want breath training timers to pause when I switch apps",
      "acceptanceCriteria": [
        "Add WidgetsBindingObserver mixin to paced_breathing_screen.dart",
        "Add WidgetsBindingObserver mixin to patrick_breath_screen.dart",
        "Timer pauses when AppLifecycleState.paused",
        "Timer stays paused when user returns",
        "flutter test passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": "BreathHoldScreen already has this - copy pattern to other two screens.",
      "dependsOn": []
    },
    {
      "id": "US-006",
      "title": "3A: Breathing Cues Visibility (Web)",
      "description": "As a user on web, I want breathing cues to be prominent and centered",
      "acceptanceCriteria": [
        "Move breathing indicator to center of screen (not bottom)",
        "Increase size significantly for web",
        "Add subtle pulsing animation to draw attention",
        "Use MediaQuery to detect web and adjust layout",
        "Test in web browser",
        "flutter test passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": "Files: lib/screens/breath_training/paced_breathing_screen.dart, breath_hold_screen.dart, patrick_breath_screen.dart",
      "dependsOn": ["US-004", "US-005"]
    },
    {
      "id": "US-007",
      "title": "5F: Front Camera Default",
      "description": "As a user, I want the camera to default to front (selfie) with option to switch",
      "acceptanceCriteria": [
        "Front camera is DEFAULT on open",
        "Add camera switch button in UI",
        "Works on both native and web",
        "flutter test passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": "Files: lib/screens/delayed_camera_native.dart, lib/screens/delayed_camera_web.dart",
      "dependsOn": []
    },
    {
      "id": "US-008",
      "title": "4A: Exhale Test Redesign",
      "description": "As a user, I want a proper exhale test with paced breaths, timed exhale, and running record",
      "acceptanceCriteria": [
        "New flow: 2 paced breaths -> exhale test (timed) -> recovery breaths -> repeat",
        "User taps when exhale finished to record duration",
        "Side panel shows running record of exhale times this session",
        "Show personal best exhale time (all time)",
        "Show current session best",
        "Store exhale records in database",
        "flutter test passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": "Major rewrite of breath_hold_screen.dart. See PRD_RALPH_SESSION.md for detailed UI layout.",
      "dependsOn": ["US-006"]
    },
    {
      "id": "US-009",
      "title": "4B: Equipment Log Expansion - Database",
      "description": "As a developer, I want expanded equipment schema",
      "acceptanceCriteria": [
        "Add to Bows: poundage, limb_model, purchase_date, riser_model, shot_count",
        "Create Stabilizers table with all fields from PRD",
        "Add to Shafts: spine, length_inches, point_weight_grains, nock_type, fletch_type, fletch_color, purchase_date",
        "Add database migration",
        "flutter test passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": "See PRD_RALPH_SESSION.md for full schema details.",
      "dependsOn": []
    },
    {
      "id": "US-010",
      "title": "4B: Equipment Log Expansion - UI",
      "description": "As a user, I want to enter detailed equipment specifications",
      "acceptanceCriteria": [
        "Update bow_form_screen.dart with new fields",
        "Create stabilizer_form_screen.dart",
        "Expand shaft_detail_screen.dart for arrow specs",
        "Update equipment_screen.dart to display all new fields",
        "flutter test passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": "Follow SessionDetailScreen pattern for loading/error states.",
      "dependsOn": ["US-009"]
    },
    {
      "id": "US-011",
      "title": "4C: Shaft Tracking Enhancements",
      "description": "As a user, I want improved shaft tracking with remembered preference and used arrow highlighting",
      "acceptanceCriteria": [
        "Store shaft_tagging_default in SharedPreferences",
        "Load preference on session_start_screen init",
        "In ShaftSelectorBottomSheet, dim arrows already used this end",
        "Add nock_rotation column to Arrows table (nullable)",
        "Add optional nock rotation selector (small, unobtrusive)",
        "flutter test passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": "Nock rotation is LOW PRIORITY - most users skip it.",
      "dependsOn": []
    },
    {
      "id": "US-012",
      "title": "4C: Per-Shaft Analysis",
      "description": "As a user, I want to see performance stats for each arrow",
      "acceptanceCriteria": [
        "Create lib/utils/shaft_analysis.dart",
        "Calculate per-arrow: average position, spread, score distribution",
        "Detect outliers",
        "Create lib/screens/shaft_analysis_screen.dart",
        "Show recommendations for retiring inconsistent arrows",
        "flutter test passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": "Include overlap/robin-hood probability calculation.",
      "dependsOn": ["US-011"]
    },
    {
      "id": "US-013",
      "title": "5A: Inter-Device Data Sync",
      "description": "As a user, I want my data to sync between devices",
      "acceptanceCriteria": [
        "Implement push local data to Firestore",
        "Implement pull remote data to local",
        "Merge strategy: keep all data from both (no deletions)",
        "Add manual sync button in settings",
        "Show sync status indicator",
        "flutter test passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": "File: lib/services/firestore_sync_service.dart. Offline-first - local is authority.",
      "dependsOn": []
    },
    {
      "id": "US-014",
      "title": "5B: Kit Tuning Framework",
      "description": "As a user, I want to track bow tuning with checklists and history",
      "acceptanceCriteria": [
        "Create TuningSessions table",
        "Create tuning_checklist_screen.dart with recurve/compound checklists",
        "Paper tune logger with tear direction/size and auto-suggestions",
        "Create tuning_history_screen.dart",
        "Create lib/utils/tuning_suggestions.dart",
        "flutter test passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": "See PRD_RALPH_SESSION.md for detailed checklist fields.",
      "dependsOn": []
    },
    {
      "id": "US-015",
      "title": "5C: Clicks-Per-Ring Wizard",
      "description": "As a user, I want a guided wizard to calculate sight clicks per ring",
      "acceptanceCriteria": [
        "Create clicks_per_ring_wizard.dart with 5-step flow",
        "Check group centering threshold based on handicap",
        "Calculate and display clicks per ring result",
        "Save calibration to database per distance",
        "Check entitlement for premium gate",
        "flutter test passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": "POSSIBLY PREMIUM FEATURE. See PRD for centering thresholds by handicap.",
      "dependsOn": []
    },
    {
      "id": "US-016",
      "title": "5D: 252 Scheme Tracker",
      "description": "As a user, I want to track my 252 club progression",
      "acceptanceCriteria": [
        "Create scheme_252 table",
        "Create scheme_252_screen.dart showing all distances",
        "Manual entry to mark achieved or enter scores",
        "Auto-detect when 36-arrow imperial session scores 252+",
        "Show progress X/7 distances",
        "flutter test passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": "Distances: 20, 30, 40, 50, 60, 80, 100 yards.",
      "dependsOn": []
    },
    {
      "id": "US-017",
      "title": "5E: Group Visualization Enhancements",
      "description": "As a user, I want improved group visualization with ellipse, colors, and ring notation",
      "acceptanceCriteria": [
        "Add spread ellipse using covariance matrix",
        "Color arrows by end (End 1: Gold, End 2: Cyan, etc.)",
        "Display group size in ring notation (e.g., '9.2 group')",
        "Add toggles to show/hide each visualization",
        "flutter test passes"
      ],
      "priority": 17,
      "passes": false,
      "notes": "Files: lib/widgets/group_centre_widget.dart, lib/widgets/target_face.dart, lib/utils/group_analysis.dart",
      "dependsOn": []
    },
    {
      "id": "US-018",
      "title": "Final Verification",
      "description": "Verify all changes and commit",
      "acceptanceCriteria": [
        "Run flutter test - ALL tests pass",
        "Run flutter analyze - no errors",
        "Commit with descriptive message",
        "Push to branch"
      ],
      "priority": 18,
      "passes": false,
      "notes": "Do not proceed if tests fail.",
      "dependsOn": ["US-001", "US-002", "US-003", "US-004", "US-005", "US-006", "US-007", "US-008", "US-010", "US-012", "US-013", "US-014", "US-015", "US-016", "US-017"]
    },
    {
      "id": "US-019",
      "title": "Deploy Everything",
      "description": "Build and deploy to all platforms",
      "acceptanceCriteria": [
        "Run flutter build web --release",
        "Deploy web build to Firebase Hosting: firebase deploy --only hosting",
        "Run flutter build apk --release for Android",
        "Run flutter build appbundle --release for Play Store",
        "Run flutter build ios --release for iOS (if on Mac)",
        "Report deployment URLs and build artifacts"
      ],
      "priority": 19,
      "passes": false,
      "notes": "Requires Firebase CLI configured. iOS build only works on macOS.",
      "dependsOn": ["US-018"]
    }
  ],
  "metadata": {
    "createdAt": "2026-01-16T14:45:00.000Z",
    "estimatedIterations": 19,
    "purpose": "Bug fixes, UI improvements, and features from PRD_RALPH_SESSION.md - excludes testing work which is handled separately",
    "sourceDocument": "docs/PRD_RALPH_SESSION.md"
  }
}
