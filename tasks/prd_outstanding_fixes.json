{
  "name": "Outstanding Fixes & Features",
  "branchName": "outstanding-fixes",
  "userStories": [
    {
      "id": "US-001",
      "title": "Kit Details Auto-Prompt on Top 20% Score",
      "description": "When an archer achieves a score in their top 20% historically, prompt to save current kit configuration. Trigger after session complete when current_score >= 80th percentile and user has at least 5 sessions.",
      "acceptanceCriteria": [
        "Add percentile calculation utility to lib/utils/statistics.dart",
        "Create KitSnapshot model in lib/models/kit_snapshot.dart",
        "Add KitSnapshots table to database (id, bowId, quiverId, snapshotDate, sessionId, score, settings JSON)",
        "Add kit snapshot save/load methods to equipment_provider.dart",
        "Show bottom sheet prompt on session_complete_screen.dart when score is top 20%",
        "Percentile calculation handles edge cases (empty list, single item)",
        "Prompt only shows when score is top 20%",
        "Prompt does not show with <5 historical sessions",
        "Kit snapshot saves current bow and quiver settings",
        "Kit snapshots viewable from equipment screen"
      ],
      "priority": 1,
      "passes": true,
      "dependsOn": [],
      "completionNotes": "Completed by agent"
    },
    {
      "id": "US-002",
      "title": "Kit Tuning Framework",
      "description": "Structured way to log and track bow tuning with different checklists for recurve vs compound. Recurve: brace height, nock point, tiller, centershot, plunger tension, paper tune, bare shaft, walk-back. Compound: cam timing, yoke tuning, rest position, peep height, paper tune, bare shaft, French tune.",
      "acceptanceCriteria": [
        "Add TuningSessions table to database (id, bowId, date, bowType, tuningType, results JSON, notes)",
        "Create TuningSession model in lib/models/tuning_session.dart",
        "Create tuning_checklist_screen.dart with bow type detection showing correct checklist",
        "Create tuning_history_screen.dart showing timeline of tuning sessions",
        "Create tuning_suggestions.dart utility for auto-suggestions from tear patterns",
        "Paper tune logger captures tear direction (up/down/left/right/clean) and size (small/medium/large)",
        "Correct checklist shown based on bow type",
        "Paper tune results logged with suggestions",
        "Tuning history displays timeline",
        "Tuning data persists across sessions"
      ],
      "priority": 2,
      "passes": false,
      "dependsOn": []
    },
    {
      "id": "US-003",
      "title": "Arrow Shaft Tracking & Analysis",
      "description": "Track individual arrow performance for both specs and shot tracking. Expand Shafts table with spine, length, point weight, fletching type/color, nock color. Add shaftId to Arrows table.",
      "acceptanceCriteria": [
        "Expand Shafts table with spine, lengthInches, pointWeight, fletchingType, fletchingColor, nockColor",
        "Add shaftId foreign key to Arrows table",
        "Create shaft_detail_screen.dart with spec entry form and batch mode",
        "Modify plotting_screen.dart with arrow number picker (1-12 chips)",
        "Create shaft_analysis.dart utility with per-arrow analysis (avg position deviation, group spread, score distribution, outlier detection, overlap likelihood)",
        "Create shaft_analysis_screen.dart with results UI and recommendations",
        "Arrow specs can be entered individually or batch",
        "Shaft picker appears during plotting (optional use)",
        "Analysis shows per-arrow performance",
        "Outliers identified with retirement suggestions",
        "Overlap risk warning displays when appropriate"
      ],
      "priority": 2,
      "passes": false,
      "dependsOn": []
    }
  ],
  "metadata": {
    "updatedAt": "2026-01-17T11:58:50.505Z"
  }
}